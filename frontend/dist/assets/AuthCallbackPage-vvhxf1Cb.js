import{j as e}from"./query-Bv2YtT6Q.js";import{e as g,f as j,r as n}from"./vendor-DW262YiZ.js";import{S as w,s as o}from"./index-QTZiQ_WQ.js";import"./supabase-BQbgwcOn.js";function y(){const s=g(),[h]=j(),[t,c]=n.useState("processing"),[x,f]=n.useState("");return n.useEffect(()=>{async function p(){try{const{data:{session:r},error:i}=await o.auth.getSession();if(i)throw i;if(!r){const l=new URLSearchParams(window.location.hash.substring(1)),m=l.get("access_token"),u=l.get("refresh_token");if(m&&u){const{error:d}=await o.auth.setSession({access_token:m,refresh_token:u});if(d)throw d}else throw new Error("No se encontró una sesión válida")}c("success");const{data:a}=await o.from("profiles").select("is_complete").single();setTimeout(()=>{a!=null&&a.is_complete?s("/dashboard",{replace:!0}):s("/complete-profile",{replace:!0})},1e3)}catch(r){console.error("Auth callback error:",r),c("error"),f(r instanceof Error?r.message:"No se pudo completar la autenticación")}}p()},[s,h]),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950",children:e.jsxs("div",{className:"text-center",children:[t==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{size:"lg",className:"mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-medium text-white mb-2",children:"Verificando..."}),e.jsx("p",{className:"text-surface-400",children:"Estamos procesando tu inicio de sesión"})]}),t==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"w-8 h-8 text-green-400"})}),e.jsx("h1",{className:"text-xl font-medium text-white mb-2",children:"¡Listo!"}),e.jsx("p",{className:"text-surface-400",children:"Redirigiendo..."})]}),t==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8 text-red-400"})}),e.jsx("h1",{className:"text-xl font-medium text-white mb-2",children:"Error de autenticación"}),e.jsx("p",{className:"text-surface-400 mb-6",children:x}),e.jsx("a",{href:"/login",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-500 text-white rounded-lg transition-colors",children:"Volver a intentar"})]})]})})}function b({className:s}){return e.jsx("svg",{className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}function k({className:s}){return e.jsx("svg",{className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}export{y as default};
//# sourceMappingURL=AuthCallbackPage-vvhxf1Cb.js.map
