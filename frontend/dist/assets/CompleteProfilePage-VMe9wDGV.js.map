{"version":3,"file":"CompleteProfilePage-VMe9wDGV.js","sources":["../../src/pages/auth/CompleteProfilePage.tsx"],"sourcesContent":["/**\r\n * =============================================================================\r\n * PÁGINA DE COMPLETAR PERFIL\r\n * =============================================================================\r\n * \r\n * Flujo obligatorio post-registro para completar datos mínimos.\r\n * Bloquea navegación hasta completar campos requeridos.\r\n */\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useProfile } from '@/hooks/useProfile';\r\nimport { validate, completeProfileSchema } from '@/lib/validations';\r\nimport { Button } from '@/components/ui/Button';\r\nimport { FormField, Input, RadioGroup } from '@/components/ui/FormField';\r\nimport { Spinner } from '@/components/ui/LoadingStates';\r\n\r\nconst GENDER_OPTIONS = [\r\n  {\r\n    value: 'male',\r\n    label: 'Masculino',\r\n    description: 'Participarás en torneos de categoría masculina',\r\n  },\r\n  {\r\n    value: 'female',\r\n    label: 'Femenino',\r\n    description: 'Participarás en torneos de categoría femenina',\r\n  },\r\n];\r\n\r\nexport default function CompleteProfilePage() {\r\n  const navigate = useNavigate();\r\n  const { profile, updateProfile, isLoading, isUpdating, missingFields } = useProfile();\r\n\r\n  const [name, setName] = useState(profile?.name ?? '');\r\n  const [gender, setGender] = useState<string>(profile?.gender ?? '');\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  const handleSubmit = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setErrors({});\r\n\r\n    const validation = validate(completeProfileSchema, { name, gender });\r\n    if (!validation.success) {\r\n      setErrors(validation.errors ?? {});\r\n      return;\r\n    }\r\n\r\n    updateProfile(\r\n      { name, gender: gender as 'male' | 'female' },\r\n      {\r\n        onSuccess: () => {\r\n          navigate('/dashboard', { replace: true });\r\n        },\r\n      }\r\n    );\r\n  }, [name, gender, updateProfile, navigate]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-surface-950\">\r\n        <Spinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si el perfil ya está completo, redirigir\r\n  if (profile?.is_complete) {\r\n    navigate('/dashboard', { replace: true });\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950\">\r\n      {/* Background decoration */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-primary-500/10 to-transparent rounded-full blur-3xl\" />\r\n      </div>\r\n\r\n      <div className=\"relative w-full max-w-lg\">\r\n        {/* Progress indicator */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between text-sm text-surface-400 mb-2\">\r\n            <span>Completando tu perfil</span>\r\n            <span className=\"text-primary-400\">Paso 1 de 1</span>\r\n          </div>\r\n          <div className=\"h-1 bg-surface-800 rounded-full overflow-hidden\">\r\n            <div className=\"h-full w-1/2 bg-gradient-to-r from-primary-500 to-primary-400 rounded-full\" />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-500 shadow-lg shadow-amber-500/30 mb-4\">\r\n            <UserPlusIcon className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-white mb-2\">\r\n            ¡Ya casi está!\r\n          </h1>\r\n          <p className=\"text-surface-400\">\r\n            Necesitamos algunos datos para que puedas inscribirte a torneos\r\n          </p>\r\n        </div>\r\n\r\n        {/* Missing fields notice */}\r\n        {missingFields.length > 0 && (\r\n          <div className=\"mb-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl\">\r\n            <div className=\"flex gap-3\">\r\n              <InfoIcon className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-sm text-amber-200 font-medium\">\r\n                  Completá estos campos para continuar:\r\n                </p>\r\n                <ul className=\"mt-1 text-sm text-amber-300/80\">\r\n                  {missingFields.includes('name') && <li>• Tu nombre completo</li>}\r\n                  {missingFields.includes('gender') && <li>• Tu género (para categorías)</li>}\r\n                  {missingFields.includes('contact') && <li>• Email o teléfono de contacto</li>}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Card */}\r\n        <div className=\"bg-surface-900/80 backdrop-blur-xl border border-surface-800 rounded-2xl p-6 shadow-xl\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* Name */}\r\n            <FormField\r\n              label=\"Nombre completo\"\r\n              error={errors.name}\r\n              required\r\n              hint=\"Así aparecerás en los torneos\"\r\n            >\r\n              <Input\r\n                type=\"text\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"Juan Pérez\"\r\n                autoComplete=\"name\"\r\n                autoFocus\r\n                error={!!errors.name}\r\n              />\r\n            </FormField>\r\n\r\n            {/* Gender */}\r\n            <FormField\r\n              label=\"Género\"\r\n              error={errors.gender}\r\n              required\r\n            >\r\n              <RadioGroup\r\n                name=\"gender\"\r\n                value={gender}\r\n                onChange={setGender}\r\n                options={GENDER_OPTIONS}\r\n                error={!!errors.gender}\r\n              />\r\n            </FormField>\r\n\r\n            {/* Submit */}\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              isLoading={isUpdating}\r\n              size=\"lg\"\r\n            >\r\n              Completar perfil\r\n            </Button>\r\n          </form>\r\n        </div>\r\n\r\n        {/* Why we ask */}\r\n        <div className=\"mt-6 p-4 bg-surface-800/50 rounded-xl border border-surface-700\">\r\n          <h3 className=\"text-sm font-medium text-surface-200 mb-2 flex items-center gap-2\">\r\n            <ShieldIcon className=\"w-4 h-4 text-primary-400\" />\r\n            ¿Por qué pedimos estos datos?\r\n          </h3>\r\n          <ul className=\"text-xs text-surface-400 space-y-1\">\r\n            <li>• <strong>Nombre:</strong> Para identificarte en torneos y rankings</li>\r\n            <li>• <strong>Género:</strong> Para asignarte a la categoría correcta</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// ICONS\r\n// =============================================================================\r\n\r\nfunction UserPlusIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction InfoIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction ShieldIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\n"],"names":["GENDER_OPTIONS","CompleteProfilePage","navigate","useNavigate","profile","updateProfile","isLoading","isUpdating","missingFields","useProfile","name","setName","useState","gender","setGender","errors","setErrors","handleSubmit","useCallback","e","validation","validate","completeProfileSchema","jsx","Spinner","jsxs","UserPlusIcon","InfoIcon","FormField","Input","RadioGroup","Button","ShieldIcon","className"],"mappings":"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"}