import{j as e}from"./query-Bv2YtT6Q.js";import{e as S,r as n}from"./vendor-DW262YiZ.js";import{a as L,d as D,v as E,S as P,f as F}from"./index-QTZiQ_WQ.js";import{L as I,F as o,I as d,B as N}from"./FormField-DcLSszBB.js";import"./supabase-BQbgwcOn.js";const T=[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}];function W(){var g,j;const i=S(),y=L(),{profile:a,updateProfile:h,isLoading:C,isUpdating:w,isComplete:k}=D(),[s,f]=n.useState({name:"",email:"",phone:"",gender:void 0,birth_date:""}),[t,m]=n.useState({}),[u,p]=n.useState(!1);n.useEffect(()=>{a&&f({name:a.name??"",email:a.email??"",phone:a.phone??"",gender:a.gender??void 0,birth_date:a.birth_date??""})},[a]),n.useEffect(()=>{if(!a)return;const r=s.name!==(a.name??"")||s.email!==(a.email??"")||s.phone!==(a.phone??"")||s.gender!==a.gender||s.birth_date!==(a.birth_date??"");p(r)},[s,a]);const l=n.useCallback((r,c)=>{f(x=>({...x,[r]:c})),t[r]&&m(x=>{const v={...x};return delete v[r],v})},[t]),_=n.useCallback(async r=>{r.preventDefault(),m({});const c=E(F,s);if(!c.success){m(c.errors??{});return}h(c.data,{onSuccess:()=>{p(!1)}})},[s,h]),b=n.useCallback(()=>{u&&!window.confirm("¿Descartar cambios sin guardar?")||i(-1)},[u,i]);return C?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-950",children:e.jsx(P,{size:"lg"})}):e.jsx("div",{className:"min-h-screen bg-surface-950 py-8 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:b,className:"flex items-center gap-2 text-surface-400 hover:text-surface-200 transition-colors mb-4",children:[e.jsx(A,{className:"w-5 h-5"}),"Volver"]}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Editar perfil"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Actualizá tu información personal"})]}),!k&&e.jsx("div",{className:"mb-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-amber-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-200 font-medium",children:"Tu perfil está incompleto"}),e.jsx("p",{className:"text-sm text-amber-300/80 mt-1",children:"Completá los campos obligatorios para poder inscribirte a torneos."})]})]})}),e.jsxs("div",{className:"bg-surface-900/80 border border-surface-800 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-surface-800 bg-gradient-to-r from-primary-500/10 to-transparent",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-surface-700 flex items-center justify-center overflow-hidden",children:a!=null&&a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.name??"Avatar",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-3xl font-bold text-surface-400",children:((j=(g=s.name)==null?void 0:g[0])==null?void 0:j.toUpperCase())??"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-white",children:s.name||"Sin nombre"}),e.jsx(I,{variant:"primary",onClick:()=>y.info("Próximamente","Podrás cambiar tu foto de perfil"),children:"Cambiar foto"})]})]})}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsx(o,{label:"Nombre completo",error:t.name,required:!0,children:e.jsx(d,{type:"text",value:s.name,onChange:r=>l("name",r.target.value),placeholder:"Tu nombre",error:!!t.name})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Email",error:t.email,hint:"Para notificaciones",children:e.jsx(d,{type:"email",value:s.email??"",onChange:r=>l("email",r.target.value),placeholder:"tu@email.com",error:!!t.email})}),e.jsx(o,{label:"Teléfono",error:t.phone,hint:"Para contacto de emergencia",children:e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-surface-700 bg-surface-800 text-surface-400 text-sm",children:"+54"}),e.jsx(d,{type:"tel",value:s.phone??"",onChange:r=>l("phone",r.target.value),placeholder:"1155667788",error:!!t.phone,className:"rounded-l-none"})]})})]}),e.jsx(o,{label:"Género",error:t.gender,required:!0,hint:"Determina tu categoría en torneos",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(r=>e.jsx("button",{type:"button",onClick:()=>l("gender",r.value),className:`p-3 rounded-lg border text-sm font-medium transition-all ${s.gender===r.value?"border-primary-500 bg-primary-500/10 text-primary-400":"border-surface-700 text-surface-300 hover:bg-surface-800"} ${t.gender?"border-red-500/50":""}`,children:r.label},r.value))})}),e.jsx(o,{label:"Fecha de nacimiento",error:t.birth_date,hint:"Opcional, para estadísticas por edad",children:e.jsx(d,{type:"date",value:s.birth_date??"",onChange:r=>l("birth_date",r.target.value),error:!!t.birth_date,max:new Date().toISOString().split("T")[0]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-surface-800",children:[e.jsx(N,{type:"button",variant:"secondary",onClick:b,className:"flex-1",children:"Cancelar"}),e.jsx(N,{type:"submit",isLoading:w,disabled:!u,className:"flex-1",children:"Guardar cambios"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-surface-800/50 rounded-xl border border-surface-700",children:[e.jsx("h3",{className:"text-sm font-medium text-surface-200 mb-3",children:"Información de cuenta"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Miembro desde"}),e.jsx("span",{className:"text-surface-200",children:a!=null&&a.created_at?new Date(a.created_at).toLocaleDateString("es-AR",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Última actualización"}),e.jsx("span",{className:"text-surface-200",children:a!=null&&a.updated_at?new Date(a.updated_at).toLocaleDateString("es-AR",{year:"numeric",month:"long",day:"numeric"}):"-"})]})]})]})]})})}function A({className:i}){return e.jsx("svg",{className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}function B({className:i}){return e.jsx("svg",{className:i,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}export{W as default};
//# sourceMappingURL=EditProfilePage-C7wPzwJP.js.map
