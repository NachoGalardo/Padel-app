{"version":3,"file":"LoginPage-BdSZL3Di.js","sources":["../../src/pages/auth/LoginPage.tsx"],"sourcesContent":["/**\r\n * =============================================================================\r\n * PÁGINA DE LOGIN\r\n * =============================================================================\r\n * \r\n * Login con magic link (email) o SMS (teléfono).\r\n * UX guiada con tabs y validación en tiempo real.\r\n */\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { validate, loginSchema, phoneLoginSchema } from '@/lib/validations';\r\nimport { Button, LinkButton } from '@/components/ui/Button';\r\nimport { FormField, Input } from '@/components/ui/FormField';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype AuthMethod = 'email' | 'phone';\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate();\r\n  const { signInWithEmail, signInWithPhone, isLoading } = useAuth();\r\n  \r\n  const [method, setMethod] = useState<AuthMethod>('email');\r\n  const [email, setEmail] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  const handleSubmit = useCallback(async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setErrors({});\r\n\r\n    if (method === 'email') {\r\n      const validation = validate(loginSchema, { email });\r\n      if (!validation.success) {\r\n        setErrors(validation.errors ?? {});\r\n        return;\r\n      }\r\n      \r\n      const success = await signInWithEmail(email);\r\n      if (success) {\r\n        navigate('/auth/verify', { \r\n          state: { type: 'email', contact: email } \r\n        });\r\n      }\r\n    } else {\r\n      const validation = validate(phoneLoginSchema, { phone });\r\n      if (!validation.success) {\r\n        setErrors(validation.errors ?? {});\r\n        return;\r\n      }\r\n      \r\n      const success = await signInWithPhone(validation.data!.phone);\r\n      if (success) {\r\n        navigate('/auth/verify', { \r\n          state: { type: 'phone', contact: validation.data!.phone } \r\n        });\r\n      }\r\n    }\r\n  }, [method, email, phone, signInWithEmail, signInWithPhone, navigate]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950\">\r\n      {/* Background decoration */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-bl from-primary-500/10 to-transparent rounded-full blur-3xl\" />\r\n        <div className=\"absolute -bottom-1/2 -left-1/2 w-full h-full bg-gradient-to-tr from-primary-600/5 to-transparent rounded-full blur-3xl\" />\r\n      </div>\r\n\r\n      <div className=\"relative w-full max-w-md\">\r\n        {/* Logo & Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-500 to-primary-600 shadow-lg shadow-primary-500/30 mb-4\">\r\n            <PadelIcon className=\"w-8 h-8 text-white\" />\r\n          </div>\r\n          <h1 className=\"text-2xl font-bold text-white mb-2\">\r\n            Bienvenido a Padel App\r\n          </h1>\r\n          <p className=\"text-surface-400\">\r\n            Ingresá con tu email o teléfono\r\n          </p>\r\n        </div>\r\n\r\n        {/* Card */}\r\n        <div className=\"bg-surface-900/80 backdrop-blur-xl border border-surface-800 rounded-2xl p-6 shadow-xl\">\r\n          {/* Method Tabs */}\r\n          <div className=\"flex bg-surface-800 rounded-lg p-1 mb-6\">\r\n            <TabButton\r\n              active={method === 'email'}\r\n              onClick={() => setMethod('email')}\r\n            >\r\n              <MailIcon className=\"w-4 h-4\" />\r\n              Email\r\n            </TabButton>\r\n            <TabButton\r\n              active={method === 'phone'}\r\n              onClick={() => setMethod('phone')}\r\n            >\r\n              <PhoneIcon className=\"w-4 h-4\" />\r\n              Teléfono\r\n            </TabButton>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n            {method === 'email' ? (\r\n              <FormField\r\n                label=\"Email\"\r\n                error={errors.email}\r\n                hint=\"Te enviaremos un link mágico para iniciar sesión\"\r\n              >\r\n                <Input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"tu@email.com\"\r\n                  autoComplete=\"email\"\r\n                  autoFocus\r\n                  error={!!errors.email}\r\n                />\r\n              </FormField>\r\n            ) : (\r\n              <FormField\r\n                label=\"Teléfono\"\r\n                error={errors.phone}\r\n                hint=\"Te enviaremos un código por SMS\"\r\n              >\r\n                <div className=\"flex\">\r\n                  <span className=\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-surface-700 bg-surface-800 text-surface-400 text-sm\">\r\n                    +54\r\n                  </span>\r\n                  <Input\r\n                    type=\"tel\"\r\n                    value={phone}\r\n                    onChange={(e) => setPhone(e.target.value)}\r\n                    placeholder=\"1155667788\"\r\n                    autoComplete=\"tel\"\r\n                    autoFocus\r\n                    error={!!errors.phone}\r\n                    className=\"rounded-l-none\"\r\n                  />\r\n                </div>\r\n              </FormField>\r\n            )}\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              isLoading={isLoading}\r\n              size=\"lg\"\r\n            >\r\n              {method === 'email' ? 'Enviar link' : 'Enviar código'}\r\n            </Button>\r\n          </form>\r\n\r\n          {/* Help text */}\r\n          <div className=\"mt-6 pt-6 border-t border-surface-800\">\r\n            <p className=\"text-sm text-surface-400 text-center\">\r\n              ¿Primera vez?{' '}\r\n              <LinkButton onClick={() => {}}>\r\n                Se creará tu cuenta automáticamente\r\n              </LinkButton>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <p className=\"mt-8 text-center text-xs text-surface-500\">\r\n          Al continuar, aceptás nuestros{' '}\r\n          <a href=\"/terms\" className=\"text-primary-400 hover:underline\">\r\n            Términos de servicio\r\n          </a>{' '}\r\n          y{' '}\r\n          <a href=\"/privacy\" className=\"text-primary-400 hover:underline\">\r\n            Política de privacidad\r\n          </a>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// SUB-COMPONENTS\r\n// =============================================================================\r\n\r\ninterface TabButtonProps {\r\n  active: boolean;\r\n  onClick: () => void;\r\n  children: React.ReactNode;\r\n}\r\n\r\nfunction TabButton({ active, onClick, children }: TabButtonProps) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className={cn(\r\n        'flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-sm font-medium transition-all',\r\n        active\r\n          ? 'bg-surface-700 text-white shadow-sm'\r\n          : 'text-surface-400 hover:text-surface-200'\r\n      )}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\n// =============================================================================\r\n// ICONS\r\n// =============================================================================\r\n\r\nfunction PadelIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n      <path d=\"M12 2v20M2 12h20\" strokeLinecap=\"round\" />\r\n      <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction MailIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction PhoneIcon({ className }: { className?: string }) {\r\n  return (\r\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\r\n    </svg>\r\n  );\r\n}\r\n"],"names":["LoginPage","navigate","useNavigate","signInWithEmail","signInWithPhone","isLoading","useAuth","method","setMethod","useState","email","setEmail","phone","setPhone","errors","setErrors","handleSubmit","useCallback","e","validation","validate","loginSchema","phoneLoginSchema","jsxs","jsx","PadelIcon","TabButton","MailIcon","PhoneIcon","FormField","Input","Button","LinkButton","active","onClick","children","cn","className"],"mappings":"+RAmBA,SAAwBA,GAAY,CAClC,MAAMC,EAAWC,EAAA,EACX,CAAE,gBAAAC,EAAiB,gBAAAC,EAAiB,UAAAC,CAAA,EAAcC,EAAA,EAElD,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAqB,OAAO,EAClD,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAE,EAC/B,CAACK,EAAQC,CAAS,EAAIN,EAAAA,SAAiC,CAAA,CAAE,EAEzDO,EAAeC,cAAY,MAAOC,GAAuB,CAI7D,GAHAA,EAAE,eAAA,EACFH,EAAU,CAAA,CAAE,EAERR,IAAW,QAAS,CACtB,MAAMY,EAAaC,EAASC,EAAa,CAAE,MAAAX,EAAO,EAClD,GAAI,CAACS,EAAW,QAAS,CACvBJ,EAAUI,EAAW,QAAU,EAAE,EACjC,MACF,CAEgB,MAAMhB,EAAgBO,CAAK,GAEzCT,EAAS,eAAgB,CACvB,MAAO,CAAE,KAAM,QAAS,QAASS,CAAA,CAAM,CACxC,CAEL,KAAO,CACL,MAAMS,EAAaC,EAASE,EAAkB,CAAE,MAAAV,EAAO,EACvD,GAAI,CAACO,EAAW,QAAS,CACvBJ,EAAUI,EAAW,QAAU,EAAE,EACjC,MACF,CAEgB,MAAMf,EAAgBe,EAAW,KAAM,KAAK,GAE1DlB,EAAS,eAAgB,CACvB,MAAO,CAAE,KAAM,QAAS,QAASkB,EAAW,KAAM,KAAA,CAAM,CACzD,CAEL,CACF,EAAG,CAACZ,EAAQG,EAAOE,EAAOT,EAAiBC,EAAiBH,CAAQ,CAAC,EAErE,OACEsB,EAAAA,KAAC,MAAA,CAAI,UAAU,sHAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,uHAAA,CAAwH,EACvIA,EAAAA,IAAC,MAAA,CAAI,UAAU,wHAAA,CAAyH,CAAA,EAC1I,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uJACb,eAACC,EAAA,CAAU,UAAU,qBAAqB,CAAA,CAC5C,EACAD,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,yBAEnD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,iCAAA,CAEhC,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,yFAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAACG,EAAA,CACC,OAAQnB,IAAW,QACnB,QAAS,IAAMC,EAAU,OAAO,EAEhC,SAAA,CAAAgB,EAAAA,IAACG,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAAA,EAGlCJ,EAAAA,KAACG,EAAA,CACC,OAAQnB,IAAW,QACnB,QAAS,IAAMC,EAAU,OAAO,EAEhC,SAAA,CAAAgB,EAAAA,IAACI,EAAA,CAAU,UAAU,SAAA,CAAU,EAAE,UAAA,CAAA,CAAA,CAEnC,EACF,EAGAL,EAAAA,KAAC,OAAA,CAAK,SAAUP,EAAc,UAAU,YACrC,SAAA,CAAAT,IAAW,QACViB,EAAAA,IAACK,EAAA,CACC,MAAM,QACN,MAAOf,EAAO,MACd,KAAK,mDAEL,SAAAU,EAAAA,IAACM,EAAA,CACC,KAAK,QACL,MAAOpB,EACP,SAAWQ,GAAMP,EAASO,EAAE,OAAO,KAAK,EACxC,YAAY,eACZ,aAAa,QACb,UAAS,GACT,MAAO,CAAC,CAACJ,EAAO,KAAA,CAAA,CAClB,CAAA,EAGFU,EAAAA,IAACK,EAAA,CACC,MAAM,WACN,MAAOf,EAAO,MACd,KAAK,kCAEL,SAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,0HAA0H,SAAA,MAE1I,EACAA,EAAAA,IAACM,EAAA,CACC,KAAK,MACL,MAAOlB,EACP,SAAWM,GAAML,EAASK,EAAE,OAAO,KAAK,EACxC,YAAY,aACZ,aAAa,MACb,UAAS,GACT,MAAO,CAAC,CAACJ,EAAO,MAChB,UAAU,gBAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,EAIJU,EAAAA,IAACO,EAAA,CACC,KAAK,SACL,UAAS,GACT,UAAA1B,EACA,KAAK,KAEJ,SAAAE,IAAW,QAAU,cAAgB,eAAA,CAAA,CACxC,EACF,QAGC,MAAA,CAAI,UAAU,wCACb,SAAAgB,EAAAA,KAAC,IAAA,CAAE,UAAU,uCAAuC,SAAA,CAAA,gBACpC,IACdC,MAACQ,EAAA,CAAW,QAAS,IAAM,CAAC,EAAG,SAAA,qCAAA,CAE/B,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAT,EAAAA,KAAC,IAAA,CAAE,UAAU,4CAA4C,SAAA,CAAA,iCACxB,UAC9B,IAAA,CAAE,KAAK,SAAS,UAAU,mCAAmC,SAAA,uBAE9D,EAAK,IAAI,IACP,UACD,IAAA,CAAE,KAAK,WAAW,UAAU,mCAAmC,SAAA,wBAAA,CAEhE,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CAYA,SAASG,EAAU,CAAE,OAAAO,EAAQ,QAAAC,EAAS,SAAAC,GAA4B,CAChE,OACEX,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAAU,EACA,UAAWE,EACT,wGACAH,EACI,sCACA,yCAAA,EAGL,SAAAE,CAAA,CAAA,CAGP,CAMA,SAASV,EAAU,CAAE,UAAAY,GAAqC,CACxD,OACEd,EAAAA,KAAC,MAAA,CAAI,UAAAc,EAAsB,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAC3F,SAAA,CAAAb,MAAC,UAAO,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,EAC/BA,EAAAA,IAAC,OAAA,CAAK,EAAE,mBAAmB,cAAc,QAAQ,QAChD,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,GAAA,CAAI,CAAA,EAChC,CAEJ,CAEA,SAASG,EAAS,CAAE,UAAAU,GAAqC,CACvD,aACG,MAAA,CAAI,UAAAA,EAAsB,KAAK,OAAO,QAAQ,YAAY,OAAO,eAAe,YAAY,IAC3F,SAAAb,EAAAA,IAAC,QAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,uGAAuG,CAAA,CAC9J,CAEJ,CAEA,SAASI,EAAU,CAAE,UAAAS,GAAqC,CACxD,aACG,MAAA,CAAI,UAAAA,EAAsB,KAAK,OAAO,QAAQ,YAAY,OAAO,eAAe,YAAY,IAC3F,SAAAb,EAAAA,IAAC,QAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,wNAAwN,CAAA,CAC/Q,CAEJ"}